var WBB={};WBB.Board={},WBB.Board.Collapsible=WCF.Collapsible.Remote.extend({_getContainers:function(){return $(".wbbBoardList .wbbCollapsibleCategory")},_getTarget:function(e){return this._containers[e].children("ul").first()},_getButtonContainer:function(e){return this._containers[e].find("header h2").first()},_getObjectID:function(e){return this._containers[e].data("boardID")},_updateContent:function(e,n,t){var o=$(n).attr("id",e);this._containers[e].replaceWith(o),this._containers[e]=o,this._initContainer(e,o)},_getAdditionalParameters:function(e){return{depth:this._containers[e].data("depth")}}}),WBB.Board.MarkAllAsRead=Class.extend({_callback:null,_proxy:null,init:function(e){this._callback=e,this._proxy=new WCF.Action.Proxy({success:$.proxy(this._success,this)}),$(".markAllAsReadButton").click($.proxy(this._click,this))},_click:function(e){e.preventDefault(),this._proxy.setOption("data",{actionName:"markAllAsRead",className:"wbb\\data\\board\\BoardAction"}),this._proxy.sendRequest()},_success:function(e,n,t){if(this._callback&&$.isFunction(this._callback))return this._callback();var o=$(".wbbBoardList");o.find(".new").removeClass("new"),$(".wbbThreadList .new").removeClass("new"),o.find(".badge.badgeUpdate").hide(),$(".mainMenu .active .badge").hide(),elBySelAll(".pageMainMenuMobile .active",void 0,function(e){elBySelAll(".badge",e.closest(".menuOverlayItem"),elRemove)}),o.find(".wbbBoard .icon32.markAsRead.fa-folder-open").removeClass("fa-folder-open").addClass("fa-folder-open-o"),o.find(".wbbSubBoards .icon16.markAsRead.fa-folder").removeClass("fa-folder").addClass("fa-folder-o"),o.find(".markAsRead").removeClass("markAsRead").unbind("dblclick"),WCF.System.Event.fireEvent("com.woltlab.wcf.MainMenuMobile","updateButtonState")}}),WBB.Board.MarkAsRead=Class.extend({_proxy:null,init:function(){this._proxy=new WCF.Action.Proxy({success:$.proxy(this._success,this)}),$(document).on("dblclick",".wbbBoardList .markAsRead",$.proxy(this._dblClick,this))},_dblClick:function(e){this._proxy.setOption("data",{actionName:"markAsRead",className:"wbb\\data\\board\\BoardAction",objectIDs:[$(e.currentTarget).parents("li:eq(0)").data("boardID")]}),this._proxy.sendRequest()},_success:function(e,n,t){var o=this;$(".wbbBoardList .markAsRead").each(function(n,t){var i=$(t),a=i.parents("li:eq(0)");WCF.inArray(a.data("boardID"),e.objectIDs)&&o._markAsRead(a,i)})},_markAsRead:function(e,n){console.debug("Processing "+e.data("boardID")),e.removeClass("new").find(".new:eq(0)").removeClass("new"),n.removeClass("markAsRead"),e.find(".badge:eq(0)").hide(),n.hasClass("fa-folder-open")?n.removeClass("fa-folder-open").addClass("fa-folder-open-o"):n.hasClass("fa-folder")&&n.removeClass("fa-folder").addClass("fa-folder-o"),n.unbind("dblclick");var t=this;e.find("ul:eq(0)").children("li").each(function(e,n){var o=$(n);t._markAsRead(o,o.find(".markAsRead:eq(0)"))})}}),WBB.Board.MarkAllThreadsAsRead=Class.extend({_boardID:0,_proxy:null,init:function(e){this._boardID=e,this._proxy=new WCF.Action.Proxy({success:$.proxy(this._success,this)}),$(".markAsReadButton").click($.proxy(this._click,this))},_click:function(e){e.preventDefault(),this._proxy.setOption("data",{actionName:"markAsRead",className:"wbb\\data\\board\\BoardAction",objectIDs:[this._boardID]}),this._proxy.sendRequest()},_success:function(e,n,t){$(".wbbThreadList .new").each(function(e,n){var t=$(n);t.removeClass("new"),t.find(".firstNewPost").parent().remove(),t.find(".columnAvatar").off("dblclick")})}}),WBB.Board.IgnoreBoards=Class.extend({_dialog:{},_didInit:!1,_proxy:{},init:function(){},_click:function(){},_initBoardList:function(){},_checkboxClick:function(){},_submit:function(){},_success:function(){}}),WBB.Thread={},WBB.Thread.MarkAsRead=Class.extend({_proxy:null,init:function(){this._proxy=new WCF.Action.Proxy({success:$.proxy(this._success,this)}),$(document).on("dblclick",".wbbThreadList .new .columnAvatar",$.proxy(this._dblclick,this))},_dblclick:function(e){this._proxy.setOption("data",{actionName:"markAsRead",className:"wbb\\data\\thread\\ThreadAction",objectIDs:[$(e.currentTarget).parents("ol:eq(0)").data("threadID")]}),this._proxy.sendRequest()},_success:function(e,n,t){$(".wbbThreadList .new").each(function(n,t){var o=$(t);WCF.inArray(o.data("threadID"),e.objectIDs)&&(o.removeClass("new"),o.find(".firstNewPost").parent().remove(),o.find(".columnAvatar").off("dblclick"))})}}),WBB.Thread.Editor={_callbacks:{},_dialog:{},_dialogContainer:{},_environment:"",_notification:{},_proxy:{},_threadID:0,beginEdit:function(){},registerCallback:function(){},_success:function(){},_showEditor:function(){},_save:function(){},_saveEdit:function(){},_getValues:function(){},_cancel:function(){},Default:function(){},LabelChooser:function(){},Language:function(){},TagList:function(){}},WBB.Thread.Editor.Default=Class.extend({init:function(){},_handleThreadType:function(){},_click:function(){},_update:function(){},getValues:function(){},saved:function(){},showErrors:function(){}}),WBB.Thread.Editor.LabelChooser=WCF.Label.Chooser.extend({init:function(){},getValues:function(){},saved:function(){},showErrors:function(){},_container:{},_groups:{},_showWithoutSelection:!1,_initContainers:function(){},_click:function(){},_selectLabel:function(){},_submit:function(){}}),WBB.Thread.Editor.Language=WCF.Language.Chooser.extend({init:function(){},getValues:function(){},saved:function(){}}),WBB.Thread.Editor.TagList=Class.extend({_api:{},init:function(){},getValues:function(){},saved:function(){}}),WBB.Thread.InlineEditor=WCF.InlineEditor.extend({_boardID:0,_environment:"",_permissions:{},_redirectURL:"",_updateHandler:{},_setOptions:function(){},setUpdateHandler:function(){},_getTriggerElement:function(){},_validate:function(){},_execute:function(){},_updateThread:function(){},_updateState:function(){},_getPermission:function(){},setEnvironment:function(){},setPermission:function(){},setPermissions:function(){},_callbacks:{},_dropdowns:{},_elements:{},_notification:{},_options:{},_proxy:{},_triggerElements:{},_updateData:{},init:function(){},_closeAll:function(){},registerCallback:function(){},_show:function(){},_validateCallbacks:function(){},_success:function(){},_click:function(){},_executeCallback:function(){},_hide:function(){}}),WBB.Thread.Clipboard=Class.extend({_boardID:0,_environment:"",_updateHandler:{},init:function(){},_clipboardAction:function(){},_move:function(){},_evaluateResponse:function(){}}),WBB.Thread.UpdateHandler=Class.extend({_markAsDoneHandler:{},_threads:{},init:function(){},setMarkAsDoneHandler:function(){},update:function(){},_updateProperty:function(){},_handleCustomProperty:function(){},_close:function(){},_delete:function(){},_deleteNote:function(){},_disable:function(){},_done:function(){},_enable:function(){},_moved:function(){},_open:function(){},_restore:function(){},_scrape:function(){},_sticky:function(){},_trash:function(){},_undone:function(){},_updateTitle:function(){},_getCloseIcon:function(){},_getDoneIcon:function(){},_getMoveIcon:function(){},_getUndoneIcon:function(){},getValue:function(){}}),WBB.Thread.UpdateHandler.Board=WBB.Thread.UpdateHandler.extend({_close:function(){},_delete:function(){},_deleteNote:function(){},_disable:function(){},_done:function(){},_enable:function(){},_moved:function(){},_showMoveNotice:function(){},_open:function(){},_restore:function(){},_trash:function(){},_undone:function(){},_markAsDoneHandler:{},_threads:{},init:function(){},setMarkAsDoneHandler:function(){},update:function(){},_updateProperty:function(){},_handleCustomProperty:function(){},_scrape:function(){},_sticky:function(){},_updateTitle:function(){},_getCloseIcon:function(){},_getDoneIcon:function(){},_getMoveIcon:function(){},_getUndoneIcon:function(){},getValue:function(){}}),WBB.Thread.UpdateHandler.Thread=WBB.Thread.UpdateHandler.extend({_boardID:0,_postManager:{},init:function(){},setPostHandler:function(){},update:function(){},_close:function(){},_delete:function(){},_disable:function(){},_done:function(){},_enable:function(){},_moved:function(){},_showMoveNotice:function(){},_open:function(){},_scrape:function(){},_sticky:function(){},_restore:function(){},_trash:function(){},_undone:function(){},_markAsDoneHandler:{},_threads:{},setMarkAsDoneHandler:function(){},_updateProperty:function(){},_handleCustomProperty:function(){},_deleteNote:function(){},_updateTitle:function(){},_getCloseIcon:function(){},_getDoneIcon:function(){},_getMoveIcon:function(){},_getUndoneIcon:function(){},getValue:function(){}}),WBB.Thread.MergeHandler=Class.extend({_className:"",_dialog:{},_dialogTitle:"",_objectIDs:{},_proxy:{},_successMessage:"",init:function(){},load:function(){},_success:function(){},_submit:function(){},_getParameters:function(){}}),WBB.Thread.AssignLabelHandler={_boardID:0,_dialog:{},_objectIDs:{},prepare:function(){},_click:function(){},_success:function(){}},WBB.Thread.CopyHandler={_boardID:0,_i:0,_objectIDs:{},prepare:function(){},copy:function(){}},WBB.Thread.MoveHandler={_boardID:0,_callback:{},_dialog:{},_didInit:!1,_environment:"",_proxy:{},_threadIDs:{},_init:function(){},prepare:function(){},_success:function(){},_move:function(){}},WBB.Thread.TypeChooser={_boardIDsContainer:{},_type:0,init:function(){},_click:function(){},_update:function(){}},WBB.Thread.LastPageHandler=Class.extend({_action:"",_isLoading:!1,_lastPostTime:0,_pageNo:0,_proxy:null,_threadID:0,init:function(e,n,t){this._isLoading=!1,this._lastPostTime=n,this._pageNo=t,this._threadID=e,this._action="",this._proxy=new WCF.Action.Proxy({showLoadingOverlay:!1,success:$.proxy(this._success,this),suppressErrors:!0}),new WCF.Action.Scroll(300,$.proxy(this._scroll,this),window,".wbbThreadPostList")},_scroll:function(e){e.stop(),this._action="getNewPosts",this._proxy.setOption("data",{actionName:"getNewPosts",className:"wbb\\data\\thread\\ThreadAction",objectIDs:[this._threadID],parameters:{countPosts:!0,lastPostTime:this._lastPostTime}}),this._proxy.sendRequest()},_success:function(e,n,t){var o=elById("messageQuickReply");if(null!==o)if(o.previousElementSibling.classList.contains("messageListPagination")&&(o=o.previousElementSibling),"getNewPosts"===this._action){if(e.returnValues.newPostsCount>0){var i=WCF.Language.get("wbb.thread.newPosts",{newPostsCount:e.returnValues.newPostsCount}),a=$('<li class="wbbMorePostsNotice"><p id="wbbNewPostsLink" class="info pointer">'+i+"</p></li>").insertBefore(o);a.click($.proxy(this._click,this))}}else if(e.returnValues.redirectURL)window.location=e.returnValues.redirectURL;else{$("#wbbNewPostsLink").parent().remove(),$(e.returnValues.template).insertBefore(o),e.returnValues.nextPageNotice&&$('<li class="wbbMorePostsNotice"><p class="info">'+e.returnValues.nextPageNotice+"</p></li>").insertBefore(o);var s=elById("messageQuickReply");s&&elData(s,"last-post-time",e.returnValues.lastPostTime)}},_click:function(e){if(this._isLoading)return!1;$(e.currentTarget).removeClass("pointer"),this._isLoading=!0,this._action="loadPosts",this._proxy.setOption("data",{actionName:"getNewPosts",className:"wbb\\data\\thread\\ThreadAction",objectIDs:[this._threadID],parameters:{countPosts:!1,lastPostTime:this._lastPostTime,pageNo:this._pageNo}}),this._proxy.sendRequest()}}),WBB.Thread.MarkAsDone=Class.extend({_proxy:{},_updateHandler:{},_threads:{},init:function(){},watch:function(){},_dblclick:function(){},_success:function(){}}),WBB.Thread.SimilarThreads=Class.extend({_proxy:{},_element:{},_boardID:0,init:function(){},_load:function(){},_success:function(){}}),WBB.Thread.WatchedThreadList=Class.extend({_button:{},_markAllCheckbox:{},init:function(){},_mark:function(){},_markAll:function(){},_stopWatching:function(){},_updateButtonLabel:function(){}}),WBB.Post={},WBB.Post.Add={},WBB.Post.Add.MessageOptions=Class.extend({_subscribeButton:{},init:function(){},_updateMessageOptions:function(){}}),WBB.Post.Clipboard=Class.extend({_postManager:{},_threadUpdateHandler:{},init:function(){},setThreadUpdateHandler:function(){},_execute:function(){},_evaluateResponse:function(){}}),WBB.Post.MergeHandler=WBB.Thread.MergeHandler.extend({init:function(){},_success:function(){},_getParameters:function(){},_className:"",_dialog:{},_dialogTitle:"",_objectIDs:{},_proxy:{},_successMessage:"",load:function(){},_submit:function(){}}),WBB.Post.CopyToExistingThread={prepare:function(){}},WBB.Post.CopyToNewThread={_boardSelect:{},_dialog:{},_objectIDs:{},_submitButton:{},_topic:{},prepare:function(){},_keyUp:function(){},_submit:function(){}},WBB.Post.MoveToNewThread={_boardSelect:{},_dialog:{},_objectIDs:{},_submitButton:{},_topic:{},prepare:function(){},_keyUp:function(){},_submit:function(){},_success:function(){}},WBB.Post.Preview=WCF.Popover.extend({_proxy:null,init:function(){this._super(".wbbTopicLink, .wbbPostLink"),this._proxy=new WCF.Action.Proxy({showLoadingOverlay:!1}),WCF.DOMNodeInsertedHandler.addCallback("WBB.Post.Preview",$.proxy(this._initContainers,this))},_loadContent:function(){var e=$("#"+this._activeElementID);e.hasClass("wbbTopicLink")?this._proxy.setOption("data",{actionName:"getPostPreview",className:"wbb\\data\\thread\\ThreadAction",objectIDs:[e.data("threadID")],parameters:{sortOrder:e.data("sortOrder")?e.data("sortOrder"):"ASC"}}):this._proxy.setOption("data",{actionName:"getPostPreview",className:"wbb\\data\\post\\PostAction",objectIDs:[e.data("postID")]});var n=this._activeElementID,t=this;this._proxy.setOption("success",function(e,o,i){t._insertContent(n,e.returnValues.template,!0)}),this._proxy.setOption("failure",function(e,o,i,a){return t._insertContent(n,e.message,!0),!1}),this._proxy.sendRequest()}}),WBB.Post.IPAddressHandler=Class.extend({_cache:{},_dialog:{},_proxy:{},init:function(){},_initButtons:function(){},_click:function(){},_success:function(){},_showDialog:function(){}}),WBB.Post.QuoteHandler=WCF.Message.Quote.Handler.extend({init:function(){},_activeContainerID:"",_className:"",_containers:{},_containerSelector:"",_copyQuote:{},_message:"",_messageBodySelector:"",_objectID:0,_objectType:"",_proxy:{},_quoteManager:{},_initContainers:function(){},_mouseDown:function(){},_getNodeText:function(){},_mouseUp:function(){},_normalize:function(){},_getBoundingRectangle:function(){},_initCopyQuote:function(){},_getSelectedText:function(){},_saveFullQuote:function(){},_saveQuote:function(){},_saveAndInsertQuote:function(){},_success:function(){},updateFullQuoteObjectIDs:function(){}});