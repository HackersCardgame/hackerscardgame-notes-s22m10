var Calendar={};Calendar.Event={},Calendar.Event.Coordinates={},Calendar.Event.Coordinates.PreSubmitHandler=Class.extend({_form:{},_locationInput:{},init:function(){},_submit:function(){},_reverseGeocoding:function(){},_setCoordinates:function(){}}),Calendar.Event.Preview=WCF.Popover.extend({_proxy:null,init:function(){this._super(".calendarEventLink"),this._proxy=new WCF.Action.Proxy({showLoadingOverlay:!1}),WCF.DOMNodeInsertedHandler.addCallback("Calendar.Event.Preview",$.proxy(this._initContainers,this))},_loadContent:function(){var e=$("#"+this._activeElementID);this._proxy.setOption("data",{actionName:"getEventPreview",className:"calendar\\data\\event\\date\\EventDateAction",objectIDs:[e.data("eventDateID")]});var t=this._activeElementID,n=this;this._proxy.setOption("success",function(e,i,a){n._insertContent(t,e.returnValues.template,!0)}),this._proxy.sendRequest()}}),Calendar.Event.Share=WCF.Message.Share.Content.extend({_eventDateID:0,init:function(e){this._eventDateID=e,this._super()},_click:function(e){e.preventDefault();var t=$(e.currentTarget),n=t.prop("href"),i=t.data("linkTitle")?t.data("linkTitle"):n,a=n.hashCode();if(void 0===this._cache[a]){var o=!1;null===this._dialog?(this._dialog=$("<div />").hide().appendTo(document.body),o=!0):this._dialog.empty();var l=$('<section class="section"><h2 class="sectionTitle"><label for="__sharePermalink">'+WCF.Language.get("wcf.message.share.permalink")+"</label></h2></section>").appendTo(this._dialog);$('<input type="text" id="__sharePermalink" class="long" readonly />').attr("value",n).appendTo(l),l=$('<section class="section"><h2 class="sectionTitle"><label for="__shareBBCode">'+WCF.Language.get("wcf.message.share.permalink.bbcode")+"</label></h2></section>").appendTo(this._dialog),$('<input type="text" id="__shareBBCode" class="long" readonly />').attr("value","[event]"+this._eventDateID+"[/event]").appendTo(l),l=$('<section class="section"><h2 class="sectionTitle"><label for="__sharePermalinkHTML">'+WCF.Language.get("wcf.message.share.permalink.html")+"</label></h2></section>").appendTo(this._dialog),$('<input type="text" id="__sharePermalinkHTML" class="long" readonly />').attr("value",'<a href="'+n+'">'+WCF.String.escapeHTML(i)+"</a>").appendTo(l),this._cache[a]=this._dialog.html(),o?this._dialog.wcfDialog({title:WCF.Language.get("wcf.message.share")}):this._dialog.wcfDialog("open")}else this._dialog.html(this._cache[a]).wcfDialog("open");this._enableSelection()}}),Calendar.Event.Date={},Calendar.Event.Date.FullDay=Class.extend({_date:{},_time:{},_input:{},_timezone:{},_isFullDay:{},init:function(){},_change:function(){},_toggle:function(){},_bindOnClose:function(){}}),Calendar.Event.Date.Participation={},Calendar.Event.Date.Participation.Manager=Class.extend({_comment:"",_companions:0,_decision:"",_dialog:{},_event:{},_eventDate:{},_eventDateID:0,_eventDateParticipation:{},_proxy:{},_ui:{},init:function(){},_click:function(){},_success:function(){},_failure:function(){},_initDialog:function(){},_updateDecision:function(){},_submit:function(){},_validateCompanions:function(){},_validate:function(){}}),Calendar.Event.Date.Participation.RemoveParticipant=WCF.Action.Delete.extend({init:function(){},_sendRequest:function(){},_success:function(){},_buttonSelector:"",_callback:{},_className:"",_containerSelector:"",_containers:{},_initElements:function(){},_click:function(){},_didTriggerEffect:function(){},_execute:function(){},setCallback:function(){},triggerEffect:function(){}}),Calendar.Event.InlineEditor=WCF.InlineEditor.extend({_redirectURL:"",setRedirectURL:function(){},_setOptions:function(){},_show:function(){},_getTriggerElement:function(){},_validate:function(){},_execute:function(){},_updateEvent:function(){},_updateState:function(){},_callbacks:{},_dropdowns:{},_elements:{},_notification:{},_options:{},_proxy:{},_triggerElements:{},_updateData:{},init:function(){},_closeAll:function(){},registerCallback:function(){},_validateCallbacks:function(){},_success:function(){},_click:function(){},_executeCallback:function(){},_hide:function(){}}),Calendar.Event.TabMenu={selectErroneousTab:function(){}},Calendar.Event.QuoteHandler=WCF.Message.Quote.Handler.extend({init:function(){},_activeContainerID:"",_className:"",_containers:{},_containerSelector:"",_copyQuote:{},_message:"",_messageBodySelector:"",_objectID:0,_objectType:"",_proxy:{},_quoteManager:{},_initContainers:function(){},_mouseDown:function(){},_getNodeText:function(){},_mouseUp:function(){},_normalize:function(){},_getBoundingRectangle:function(){},_initCopyQuote:function(){},_getSelectedText:function(){},_saveFullQuote:function(){},_saveQuote:function(){},_saveAndInsertQuote:function(){},_success:function(){},updateFullQuoteObjectIDs:function(){}}),Calendar.Event.List=Class.extend({_cache:{},_dialog:null,_proxy:null,_titles:{},init:function(){this._dialog=null,this._cache={},this._titles={},$(".jsCalendarDay").click($.proxy(this._click,this)),this._proxy=new WCF.Action.Proxy({success:$.proxy(this._success,this)})},_click:function(e){var t=$(e.currentTarget),n=t.data("date");this._cache[n]?this._render(n):(this._titles[n]=t.data("overlayTitle"),this._proxy.setOption("data",{actionName:"getEventList",className:"calendar\\data\\event\\date\\EventDateAction",parameters:{date:n}}),this._proxy.sendRequest())},_render:function(e){null===this._dialog?(this._dialog=$("<div />").hide().appendTo(document.body),this._dialog.html(this._cache[e]).wcfDialog({title:this._titles[e]})):(this._dialog.html(this._cache[e]),this._dialog.wcfDialog("option","title",this._titles[e]),this._dialog.wcfDialog("open"),this._dialog.wcfDialog("render"))},_success:function(e,t,n){this._cache[e.returnValues.date]=e.returnValues.template,this._render(e.returnValues.date)}}),Calendar.Export={},Calendar.Export.iCal=Class.extend({_dialog:null,init:function(){this._dialog=null,$(".jsCalendarExport").click(this._click.bind(this))},_click:function(e){e.preventDefault();var t=$(e.currentTarget);if(null===this._dialog){this._dialog=$("<div />");var n=t.attr("href"),i=this._buildContainer(n,"calendarExportUrl","calendar.category.export.url");i.appendTo(this._dialog),WCF.User.userID&&(i=this._buildContainer(n+"&participantOnly=1","calendarExportUrlParticipant","calendar.category.export.url.participant"),i.appendTo(this._dialog)),$('<div class="formSubmit"><a href="'+t.attr("href")+'" class="button">'+WCF.Language.get("calendar.category.export.download")+"</a></div>").appendTo(this._dialog),this._dialog.appendTo(document.body),this._dialog.wcfDialog({title:t.data("tooltip")})}else this._dialog.wcfDialog("open")},_buildContainer:function(e,t,n){var i=$('<dl><dt><label for="'+t+'">'+WCF.Language.get(n)+'</label></dt><dd><input type="text" id="'+t+'" class="long" readonly><small>'+WCF.Language.get(n+".description")+"</small></dd></dl>"),a=i.find("input").val(e);return a.click(function(){$(this).select()}),navigator.userAgent.match(/iP(ad|hone|od)/)&&a.keydown(function(){return!1}).removeAttr("readonly").click(function(){this.setSelectionRange(0,9999)}),i}}),Calendar.UI={},Calendar.UI.Calendar={_listItems:null,init:function(){this._listItems=$(".calendarFullMonthView > .calendarWeeks > li"),require(["Ui/Screen"],function(e){e.on("screen-sm-down",{match:this._enable.bind(this),unmatch:this._disable.bind(this),setup:this._enable.bind(this)})}.bind(this))},_enable:function(){this._listItems.each(function(e,t){var n=$(t);n.children("div").each(function(e,t){var i=$(t);i.data("__originalValue",i.text()),i.text(i.prop("title")),i.click(function(){n.toggleClass("open")})}),n.find("> .calendarWeekDays > li > h3").each(function(e,t){var n=$(t);n.data("__originalValue",n.text()),n.find("a").text(n.data("fullDay"))}),1==n.find(".calendarToday").length&&n.addClass("open")})},_disable:function(){this._listItems.each(function(e,t){var n=$(t).removeClass("open");n.children("div").each(function(e,t){var n=$(t);n.text(n.data("__originalValue")).off("click")}),n.find("> .calendarWeekDays > li > h3").each(function(e,t){var n=$(t);n.find("a").text(n.data("__originalValue"))})})}},Calendar.Map={},Calendar.Map.LargeMap=WCF.Location.GoogleMaps.LargeMap.extend({init:function(e,t,n,i,a){t||(t={}),t.stringifyExcludedObjectIds=!0,this._super(e,t,n,i,a)},_success:function(e,t,n){if(e.returnValues&&e.returnValues.markers)for(var i=0,a=e.returnValues.markers.length;i<a;i++){var o=e.returnValues.markers[i];this.addMarker(o.latitude,o.longitude,o.title,null,o.infoWindow,o.dialog,o.location),o.objectID?this._objectIDs.push(o.objectID):o.objectIDs&&(this._objectIDs=this._objectIDs.concat(o.objectIDs))}},addMarker:function(e,t,n,i,a,o,l){var s=$(a).get(0),c=this._super(e,t,n,i,s);return o&&google.maps.event.addListener(c.infoWindow,"domready",$.proxy(function(){new Calendar.Map.InfoWindowEventListDialog($(s).find(".jsCalendarLocationDialogEventListButton"),o,l)},this)),c.infoWindow}}),Calendar.Map.InfoWindowEventListDialog=Class.extend({_dialog:null,_dialogContent:"",_eventData:[],init:function(e,t,n){this._dialogContent=t,this._location=n,e.click($.proxy(this._click,this))},_click:function(){null===this._dialog?this._dialog=$("<div />").append(this._dialogContent).hide().appendTo(document.body).wcfDialog({title:WCF.Language.get(this._location)}):this._dialog.wcfDialog("open")}}),Calendar.Event.LabelChooser=WCF.Label.Chooser.extend({_labelGroupsToCategories:{},init:function(){},_updateLabelGroups:function(){},_submit:function(){},_container:{},_groups:{},_showWithoutSelection:!1,_initContainers:function(){},_click:function(){},_selectLabel:function(){}});